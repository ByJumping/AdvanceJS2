(()=>{var t={319:t=>{const s=t=>{t.amount=t.contents.reduce(((t,s)=>t+s.price*s.quantity),0)},e=t=>{t.countGoods=t.contents.reduce(((t,s)=>t+s.quantity),0)};t.exports={add:(t,r)=>(t.contents.push(r.body),s(t),e(t),JSON.stringify(t,null,4)),change:(t,r)=>(t.contents.find((t=>t.id_product===+r.params.id)).quantity=r.body.quantity+1,s(t),e(t),JSON.stringify(t,null,4)),remove:(t,r)=>{let n=t.contents.find((t=>t.id_product===+r.params.id));return t.contents.splice(t.contents.indexOf(n),1),s(t),e(t),JSON.stringify(t,null,4)},minus:(t,r)=>(t.contents.find((t=>t.id_product===+r.params.id)).quantity=r.body.quantity-1,s(t),e(t),JSON.stringify(t,null,4))}},508:(t,s,e)=>{const r=e(127),n=e(747),i=r.Router(),o=e(303),d=e(893);i.get("/",((t,s)=>{n.readFile("dist/server/db/userCart.json","utf-8",((t,e)=>{t?s.sendStatus(404,JSON.stringify({result:0,text:t})):s.send(e)}))})),i.post("/",((t,s)=>{o(t,s,"add","dist/server/db/userCart.json"),d(t,"addGoodsToCart","dist/server/db/stats.json")})),i.put("/:id",((t,s)=>{o(t,s,"change","dist/server/db/userCart.json"),d(t,"plusOneGoods","dist/server/db/stats.json")})),i.put("/:id/minus",((t,s)=>{o(t,s,"minus","dist/server/db/userCart.json"),d(t,"minusOneGoods","dist/server/db/stats.json")})),i.delete("/:id",((t,s)=>{o(t,s,"remove","dist/server/db/userCart.json"),d(t,"deleteGoods","dist/server/db/stats.json")})),t.exports=i},303:(t,s,e)=>{const r=e(319),n=e(747),i={add:r.add,change:r.change,remove:r.remove,minus:r.minus};t.exports=(t,s,e,r)=>{n.readFile(r,"utf-8",((o,d)=>{if(o)s.sendStatus(404,JSON.stringify({result:0,text:o}));else{let o=i[e](JSON.parse(d),t);n.writeFile(r,o,(t=>{t?s.sendStatus(404,JSON.stringify({result:0,text:t})):s.send(JSON.stringify({result:1}))}))}}))}},893:(t,s,e)=>{const r=e(747),n=e(470);t.exports=(t,s,e)=>{r.readFile(e,"utf-8",((i,o)=>{if(i)console.log(i);else{let i=((t,s,e,r)=>{let n={product:s.body,timeChange:e,action:r};return t.push(n),JSON.stringify(t,null,4)})(JSON.parse(o),t,n().format("MMMM Do YYYY, h:mm:ss a"),s);r.writeFile(e,i,(t=>{t&&console.log(t)}))}}))}},127:t=>{"use strict";t.exports=require("express")},747:t=>{"use strict";t.exports=require("fs")},470:t=>{"use strict";t.exports=require("moment")}},s={};function e(r){var n=s[r];if(void 0!==n)return n.exports;var i=s[r]={exports:{}};return t[r](i,i.exports,e),i.exports}(()=>{const t=e(127),s=e(747),r=t(),n=e(508);r.use(t.json()),r.use("/",t.static("dist/public")),r.use("/api/cart",n),r.get("/api/products",((t,e)=>{s.readFile("dist/server/db/products.json","utf-8",((t,s)=>{t?e.sendStatus(404,JSON.stringify({result:0,text:t})):e.send(s)}))}));const i=process.env.PORT||3e3;r.listen(i,(()=>console.log(`Listen port ${i}...`)))})()})();